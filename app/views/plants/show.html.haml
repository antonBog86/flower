.row
  / Content
  .8u.skel-cell-important
    %section#content
      %header
        %h2
          = @plant.science_name
        %span.byline
          = @plant.name
      #page
        #container
          .navigation-container
            #thumbs.navigation
              %a.pageLink.prev{:href => "#", :style => "visibility: hidden;", :title => "Previous Page"}
              %ul.thumbs.noscript
                %li
                  %a.thumb{:href => "http://farm4.static.flickr.com/3261/2538183196_8baf9a8015.jpg", :name => "leaf", :title => "Title #0"}
                    %img{:alt => "Title #0", :src => "http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_s.jpg"}/
                  .caption
                    .image-title Title #0
                    .image-desc Description
                    .download
                      %a{:href => "http://farm4.static.flickr.com/3261/2538183196_8baf9a8015_b.jpg"} Download Original

                %li
                  %a.thumb{:href => "http://farm4.static.flickr.com/3211/2538163540_c2026243d2.jpg", :title => "Title #8"}
                    %img{:alt => "Title #8", :src => "http://farm4.static.flickr.com/3211/2538163540_c2026243d2_s.jpg"}/
                  .caption
                    .image-title Title #8
                    .image-desc Description
                    .download
                      %a{:href => "http://farm4.static.flickr.com/3211/2538163540_c2026243d2_b.jpg"} Download Original
                %li
                  %a.thumb{:href => "http://farm3.static.flickr.com/2315/2537343449_f933be8036.jpg", :title => "Title #9"}
                    %img{:alt => "Title #9", :src => "http://farm3.static.flickr.com/2315/2537343449_f933be8036_s.jpg"}/
                  .caption
                    .image-title Title #9
                    .image-desc Description
                    .download
                      %a{:href => "http://farm3.static.flickr.com/2315/2537343449_f933be8036_b.jpg"} Download Original
                %li
                  %a.thumb{:href => "http://farm3.static.flickr.com/2375/2538172432_3343a47341.jpg", :title => "Title #19"}
                    %img{:alt => "Title #19", :src => "http://farm3.static.flickr.com/2375/2538172432_3343a47341_s.jpg"}/
                  .caption
                    .image-title Title #19
                    .image-desc Description
                    .download
                      %a{:href => "http://farm3.static.flickr.com/2375/2538172432_3343a47341_b.jpg"} Download Original
                %li
                  %a.thumb{:href => "http://farm3.static.flickr.com/2353/2083476642_d00372b96f.jpg", :title => "Title #20"}
                    %img{:alt => "Title #20", :src => "http://farm3.static.flickr.com/2353/2083476642_d00372b96f_s.jpg"}/
                  .caption
                    .image-title Title #20
                    .image-desc Description
                    .download
                      %a{:href => "http://farm3.static.flickr.com/2353/2083476642_d00372b96f_b.jpg"} Download Original
                %li
                  %a.thumb{:href => "http://farm3.static.flickr.com/2201/1502907190_7b4a2a0e34.jpg", :title => "Title #21"}
                    %img{:alt => "Title #21", :src => "http://farm3.static.flickr.com/2201/1502907190_7b4a2a0e34_s.jpg"}/
                  .caption
                    .image-title Title #21
                    .image-desc Description
                    .download
                      %a{:href => "http://farm3.static.flickr.com/2201/1502907190_7b4a2a0e34_b.jpg"} Download Original
                %li
                  %a.thumb{:href => "http://farm2.static.flickr.com/1116/1380178473_fc640e097a.jpg", :title => "Title #22"}
                    %img{:alt => "Title #22", :src => "http://farm2.static.flickr.com/1116/1380178473_fc640e097a_s.jpg"}/
                  .caption
                    .image-title Title #22
                    .image-desc Description
                    .download
                      %a{:href => "http://farm2.static.flickr.com/1116/1380178473_fc640e097a_b.jpg"} Download Original
                %li
                  %a.thumb{:href => "http://farm2.static.flickr.com/1260/930424599_e75865c0d6.jpg", :title => "Title #23"}
                    %img{:alt => "Title #23", :src => "http://farm2.static.flickr.com/1260/930424599_e75865c0d6_s.jpg"}/
                  .caption
                    .image-title Title #23
                    .image-desc Description
                    .download
                      %a{:href => "http://farm2.static.flickr.com/1260/930424599_e75865c0d6_b.jpg"} Download Original
          .content
            .slideshow-container
              #controls.controls
              #loading.loader
              #slideshow.slideshow
            #caption.caption-container
              .photo-index
          / End Gallery Html Containers
          %div{:style => "clear: both;"}
  / Sidebar
  #sidebar.4u
    %section
      %header
        %h2 Gravida praesent
        %span.byline Praesent lacus congue rutrum
      %p Donec leo, vivamus fermentum nibh in augue praesent a lacus at urna congue rutrum. Maecenas luctus lectus at sapien. Consectetuer adipiscing elit.
      %ul.default
        %li
          %a{:href => "#"} Pellentesque quis lectus gravida blandit.
        %li
          %a{:href => "#"} Lorem ipsum consectetuer adipiscing elit.
        %li
          %a{:href => "#"} Phasellus nec nibh pellentesque congue.
        %li
          %a{:href => "#"} Cras aliquam risus pellentesque pharetra.
        %li
          %a{:href => "#"} Duis non metus commodo euismod lobortis.
        %li
          %a{:href => "#"} Lorem ipsum dolor adipiscing elit.

:javascript
  jQuery(document).ready(function($) {
    // We only want these styles applied when javascript is enabled
    $('div.content').css('display', 'block');

    // Initially set opacity on thumbs and add
    // additional styling for hover effect on thumbs
    var onMouseOutOpacity = 0.67;
    $('#thumbs ul.thumbs li, div.navigation a.pageLink').opacityrollover({
      mouseOutOpacity:   onMouseOutOpacity,
      mouseOverOpacity:  1.0,
      fadeSpeed:         'fast',
      exemptionSelector: '.selected'
    });

    // Initialize Advanced Galleriffic Gallery
    var gallery = $('#thumbs').galleriffic({
      delay:                     2500,
      numThumbs:                 10,
      preloadAhead:              10,
      enableTopPager:            false,
      enableBottomPager:         false,
      imageContainerSel:         '#slideshow',
      controlsContainerSel:      '#controls',
      captionContainerSel:       '#caption',
      loadingContainerSel:       '#loading',
      renderSSControls:          true,
      renderNavControls:         true,
      playLinkText:              'Play Slideshow',
      pauseLinkText:             'Pause Slideshow',
      prevLinkText:              '&lsaquo; Previous Photo',
      nextLinkText:              'Next Photo &rsaquo;',
      nextPageLinkText:          'Next &rsaquo;',
      prevPageLinkText:          '&lsaquo; Prev',
      enableHistory:             true,
      autoStart:                 false,
      syncTransitions:           true,
      defaultTransitionDuration: 900,
      onSlideChange:             function(prevIndex, nextIndex) {
        // 'this' refers to the gallery, which is an extension of $('#thumbs')
        this.find('ul.thumbs').children()
          .eq(prevIndex).fadeTo('fast', onMouseOutOpacity).end()
          .eq(nextIndex).fadeTo('fast', 1.0);

        // Update the photo index display
        this.$captionContainer.find('div.photo-index')
          .html('Photo '+ (nextIndex+1) +' of '+ this.data.length);
      },
      onPageTransitionOut:       function(callback) {
        this.fadeTo('fast', 0.0, callback);
      },
      onPageTransitionIn:        function() {
        var prevPageLink = this.find('a.prev').css('visibility', 'hidden');
        var nextPageLink = this.find('a.next').css('visibility', 'hidden');

        // Show appropriate next / prev page links
        if (this.displayedPage > 0)
          prevPageLink.css('visibility', 'visible');

        var lastPage = this.getNumPages() - 1;
        if (this.displayedPage < lastPage)
          nextPageLink.css('visibility', 'visible');

        this.fadeTo('fast', 1.0);
      }
    });

    /**************** Event handlers for custom next / prev page links **********************/

    gallery.find('a.prev').click(function(e) {
      gallery.previousPage();
      e.preventDefault();
    });

    gallery.find('a.next').click(function(e) {
      gallery.nextPage();
      e.preventDefault();
    });

    /****************************************************************************************/

    /**** Functions to support integration of galleriffic with the jquery.history plugin ****/

    // PageLoad function
    // This function is called when:
    // 1. after calling $.historyInit();
    // 2. after calling $.historyLoad();
    // 3. after pushing "Go Back" button of a browser
    function pageload(hash) {
      // alert("pageload: " + hash);
      // hash doesn't contain the first # character.
      if(hash) {
        $.galleriffic.gotoImage(hash);
      } else {
        gallery.gotoIndex(0);
      }
    }

    // Initialize history plugin.
    // The callback is called at once by present location.hash.
    $.historyInit(pageload, "advanced.html");

    // set onlick event for buttons using the jQuery 1.3 live method
    $("a[rel='history']").live('click', function(e) {
      if (e.button != 0) return true;

      var hash = this.href;
      hash = hash.replace(/^.*#/, '');

      // moves to a new page.
      // pageload is called at once.
      // hash don't contain "#", "?"
      $.historyLoad(hash);

      return false;
    });

    /****************************************************************************************/
    });
